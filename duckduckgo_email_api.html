
<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Obter API do DuckDuckGo Email</title>
</head>
<body>
    <h2>Capturar API do DuckDuckGo Email Protection</h2>
    <button onclick="getToken()">Obter API</button>
    <p id="resultado"></p>

    <script>
        async function getToken() {
            try {
                // Faz a requisição para a API do DuckDuckGo Email Protection
                let response = await fetch("https://quack.duckduckgo.com/api/email/addresses", {
                    method: "GET",
                    credentials: "include" // Usa os cookies da sessão logada
                });

                if (!response.ok) {
                    throw new Error("Erro ao acessar a API. Certifique-se de que está logado no DuckDuckGo.");
                }

                // Captura os headers da resposta
                let headers = [...response.headers.entries()];
                let authHeader = headers.find(h => h[0] === "authorization");

                if (authHeader) {
                    let token = authHeader[1].replace("Bearer ", ""); // Remove o prefixo "Bearer"
                    document.getElementById("resultado").innerText = "Sua API Key: " + token;
                } else {
                    throw new Error("Token não encontrado! Certifique-se de estar logado e tente novamente.");
                }
            } catch (error) {
                document.getElementById("resultado").innerText = "Erro: " + error.message;
            }
        }
    </script>
</body>
</html>
